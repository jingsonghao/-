<template>
  <div class="main zscoress">
    <ol class="breadcrumb">
      <li><a>监管辅助系统</a></li>
      <li class="active jsh-active">系统首页</li>
    </ol>

    <!--上面1屏幕-->
    <div class="col-lg-9 m-b">
      <!--左侧图表+表格-->
      <!--<ipt-summary-panel></ipt-summary-panel>-->
      <!--<ipt-credit-panel></ipt-credit-panel>-->
      <div class="video-main shadow-boxs">
        <video width="100%" height="600px" controls>
          <source src="http://lwipt.qa.dppc.org/upload/video/supermarket.mp4" type="video/mp4">
          <source src="#" type="video/ogg">
          您的浏览器不支持 video 标签。
        </video>
      </div>
    </div>
    <div class="col-lg-3 m-b p-r">
      <div class="video-main shadow-boxs">
        <!--替换图片a标签-->
        <video width="100%" height="120px" controls>
          <source src="http://lwipt.qa.dppc.org/upload/video/production_and_distribution.mp4" type="video/mp4">
          <source src="#" type="video/ogg">
          您的浏览器不支持 video 标签。
        </video>
      </div>
      <div class="video-main shadow-boxs">
        <!--替换图片a标签-->
        <video width="100%" height="120px" controls>
          <source src="http://lwipt.qa.dppc.org/upload/video/duck.mp4" type="video/mp4">
          <source src="#" type="video/ogg">
          您的浏览器不支持 video 标签。
        </video>
      </div>
      <div class="video-main shadow-boxs">
        <!--替换图片a标签-->
        <video width="100%" height="120px" controls>
          <source src="http://lwipt.qa.dppc.org/upload/video/supermarket.mp4" type="video/mp4">
          <source src="#" type="video/ogg">
          您的浏览器不支持 video 标签。
        </video>
      </div>
      <div class="video-main shadow-boxs">
        <!--替换图片a标签-->
        <video width="100%" height="120px" controls>
          <source src="http://lwipt.qa.dppc.org/upload/video/production_and_distribution.mp4" type="video/mp4">
          <source src="#" type="video/ogg">
          您的浏览器不支持 video 标签。
        </video>
      </div>

      <div id="runtwo"></div>
    </div>
    <!--中间2屏幕-->
    <div class="col-lg-6 m-t m-b">
      <div class="shadow-boxs">
        <div class="table-title-box">
          <h3>问题数：9</h3>
        </div>
        <div class="table-container">
          <div class="thead-bg"></div>
          <div class="col-xs-12 table-box">
            <table class="table table-condensed">
              <thead>
              <tr>
                <th>序号</th>
                <th>问题报告生成时间</th>
                <th>问题项名称</th>
                <th>生成人</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>1</td>
                <td>2017-12-27</td>
                <td>屠宰企业进场信息上传</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>2</td>
                <td>2017-12-26</td>
                <td>屠宰企业检疫检验信息</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>3</td>
                <td>2017-12-25</td>
                <td>仓储配送企业进场信息</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>4</td>
                <td>2017-12-24</td>
                <td>仓储配送企业内部环节信息</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>5</td>
                <td>2017-12-23</td>
                <td>超市进场信息</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>6</td>
                <td>2017-12-22</td>
                <td>屠宰企业进场信息上传</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>7</td>
                <td>2017-12-21</td>
                <td>屠宰企业检疫检验信息</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>8</td>
                <td>2017-12-20</td>
                <td>仓储配送企业进场信息</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>9</td>
                <td>2017-12-19</td>
                <td>仓储配送企业内部环节信息</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>10</td>
                <td>2017-12-18</td>
                <td>超市进场信息</td>
                <td>孙明辉</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <nav aria-label="Page navigation" class="pull-right">
          <ul class="pagination pagination-sm">
            <li class="previous disabled">
              <span aria-hidden="true">«</span>
            </li>
            <li class="active "><a>1</a></li>
            <li><a>2</a></li>
            <li><a>3</a></li>
            <li><a>4</a></li>
            <li><a>5</a></li>
            <li class="next">
              <a aria-label="Next">
                <span aria-hidden="true">»</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <div class="col-lg-6 m-t m-b p-r">
      <div class="shadow-boxs">
        <div class="table-title-box">
          <h3>待处理事件数：10</h3>
        </div>
        <div class="table-container">
          <div class="thead-bg"></div>
          <div class="col-xs-12 table-box">
            <table class="table table-condensed">
              <thead>
              <tr>
                <th>序号</th>
                <th>应急事件报告名称</th>
                <th>上报时间</th>
                <th>生成人</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>1</td>
                <td>宁夏莱钢建设有限公司食堂食品安全事件</td>
                <td>2017-12-27</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>2</td>
                <td>宁夏二中食堂食品安全事件</td>
                <td>2017-12-26</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>3</td>
                <td>宁夏实验幼儿园食堂食品安全事件</td>
                <td>2017-12-25</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>4</td>
                <td>宁夏二中食堂食品安全事件</td>
                <td>2017-12-24</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>5</td>
                <td>顺成超市(北赵店)食品安全事件</td>
                <td>2017-12-23</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>6</td>
                <td>顺成超市(里辛店)食品安全事件</td>
                <td>2017-12-22</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>7</td>
                <td>顺成超市(莱钢店)食品安全事件</td>
                <td>2017-12-21</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>8</td>
                <td>玉玲超市(凤城东大街店)食品安全事件</td>
                <td>2017-12-20</td>
                <td>孙明辉</td>
              </tr>
              <tr>
                <td>9</td>
                <td>宁夏滨河小学食堂食品安全事件食品安全事件</td>
                <td>2017-12-19</td>
                <td>张欣然</td>
              </tr>
              <tr>
                <td>10</td>
                <td>宁夏二中食堂食品安全事件</td>
                <td>2017-12-18</td>
                <td>孙明辉</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <nav aria-label="Page navigation" class="pull-right">
          <ul class="pagination pagination-sm">
            <li class="previous disabled">
              <span aria-hidden="true">«</span>
            </li>
            <li class="active "><a>1</a></li>
            <li><a>2</a></li>
            <li><a>3</a></li>
            <li><a>4</a></li>
            <li><a>5</a></li>
            <li class="next">
              <a aria-label="Next">
                <span aria-hidden="true">»</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <div id="runthree"></div>
    </div>
    <!--下面3屏幕-->
    <div class="col-lg-8 m-t">
      <ipt-summary-panel></ipt-summary-panel>
      <ipt-credit-panel></ipt-credit-panel>
    </div>
    <div class="col-lg-4 m-t p-r">
      <div class="shadow-boxs">
        <div class="sum">
          <h4>设备运行情况</h4>
        </div>
        <ul class="runoption anniu">
          <li>
            <h5 class="runoption1">{{ equipmentRunStatusNum.normalNum }}</h5>
            <p>正常运行</p>
          </li>
          <li>
            <h5 class="runoption2">{{ equipmentRunStatusNum.stopUseNum }}</h5>
            <p>故障</p>
          </li>
          <li>
            <h5 class="runoption3">{{ equipmentRunStatusNum.notUseNum }}</h5>
            <p>未使用</p>
          </li>
        </ul>
      </div>
    </div>

    <!--右侧固定 导航-->
    <ul class="fixed-nav">
      <li><a href="#" class="jiankong"></a></li>
      <li><a href="#runtwo" class="kaohe"></a></li>
      <li><a href="#runthree" class="wenti"></a></li>
    </ul>

  </div>

</template>
<script type="text/ecmascript-6">
  import {mapGetters, mapActions} from 'vuex'
  import IptTable from "@/components/common/table"
  import IptEchart from '@/components/common/echart'
  import IptSummaryPanel from '@/ipt-supervise-help/components/platform/summaryPanel'
  import IptCreditPanel from '@/ipt-supervise-help/components/platform/creditPanel'
  import Dot2 from '@/assets/img/dot-2.png'
  import Help from '@/assets/img/help.png'
  import Api from '@/api'
  export default {
    components: {
      IptEchart, IptSummaryPanel, IptCreditPanel, IptTable, Api
    },
    data() {
      return {
        enterpriseTypes: [],
        rankTypes: [],
        enterpriseSummaryParams: {
          enterpriseType: {name: '超市单位', value: 1}
        },
        analysisReportParams: {
          enterpriseType: {name: '超市单位', value: 1}
        },
        equipmentRunStatusNum: { // 设备运行情况
          normalNum: 0, // 正常运行
          stopUseNum: 0, // 停用
          notUseNum: 0 // 未使用
        },
        enterpriseSummaryConfig: {
          getApi: 'getEnterpriseSummaryTableData',
          titleShow: false,  //决定表格的标题内容
          display: 10,
          pagegroup: 3,
          checkboxShow: false,
          sequenceShow: false,
          columns: [
            {title: '问题节点', data: 'problemNode'},
            {title: '及时性', data: 'timeliness'},
            {title: '完整性', data: 'integrality'},
            {title: '规范性', data: 'normative'},
            {title: '抽查率', data: 'spotCheckRate'}
          ]
        },
        analysisReportConfig: {
          getApi: 'getAnalysisReportTableData',
          titleShow: false,  //决定表格的标题内容
          display: 10,
          pagegroup: 3,
          checkboxShow: false,
          sequenceShow: false,
          columns: [
            {title: '企业名称', data: 'problemNode'},
            {title: '交易总量/次', data: 'totalTransaction'},
            {title: '交易总价/元', data: 'transactionPrice'},
            {title: '同比', data: 'yearOnYear'},
            {title: '环比', data: 'linkRelativeRatio'}
          ]
        },
        img: {Dot2, Help},
        echartData3: {
          id: 'main3',
          height: 430,
          option: {
            radar: [
              {
                indicator: [
                  {text: '备案信息完整率'},
                  {text: '上传追溯信息活跃率'},
                  {text: '设备正常率'},
                  {text: '上传信息及时率'},
                  {text: '上传信息完整率'},
                  {text: '上传信息规范率'},
                  {text: '本期追溯码使用率'},
                  {text: '累计追溯码使用率'}
                ],
                center: ['50%', '50%'],
                radius: 120,
                startAngle: 90,
                splitNumber: 4,
                shape: 'circle',
                name: {
                  formatter: '{value}',
                  textStyle: {
                    color: '#000'
                  }
                },
                splitArea: {
                  areaStyle: {
                    color: ['rgba(26, 64, 83, 0.5)',
                      'rgba(26, 64, 83, 0.5)', 'rgba(26, 64, 83, 0.5)',
                      'rgba(26, 64, 83, 0.5)'],
                    shadowColor: 'rgba(123, 162, 175, 0.3)',
                    shadowBlur: 10
                  }
                },
                axisLine: {
                  lineStyle: {
                    color: 'rgba(255, 255, 255, 0.5)'
                  }
                },
                splitLine: {
                  lineStyle: {
                    color: 'rgba(255, 255, 255, 0.5)'
                  }
                }
              }
            ],
            series: [
              {
                name: '雷达图',
                type: 'radar',
                itemStyle: {
                  emphasis: {
                    // color: 各异,
                    lineStyle: {
                      width: 4
                    }
                  }
                },
                data: [
                  {
                    value: [100, 8, 0.40, -80, 45, 66, 77, 21],
                    name: '备案信息完整率',
                    symbol: 'rect',
                    symbolSize: 5,
                    lineStyle: {
                      normal: {
                        type: 'dashed'
                      }
                    }
                  },
                  {
                    value: [60, 5, 0.30, -100, 74, 66, 55, 41],
                    name: '上传追溯信息活跃率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  },
                  {
                    value: [30, 22, 0.40, -100, 44, 66, 77, 65],
                    name: '设备正常率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  },
                  {
//                    value: [60, 5, 0.90, -1200, 11, 66, 22, 74],
                    name: '上传信息及时率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  },
                  {
//                    value: [70, 15, 0.20, -500, 21, 55, 70, 21],
                    name: '上传信息完整率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  },
                  {
//                    value: [10, 65, 0.70, -200, 47, 66, 35, 12],
                    name: '上传信息规范率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  },
                  {
//                    value: [51, 88, 0.66, -200, 21, 98, 45, 65],
                    name: '本期追溯码使用率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  },
                  {
//                    value: [22, 48, 0.45, -200, 32, 51, 80, 78],
                    name: '累计追溯码使用率',
                    areaStyle: {
                      normal: {
                        type: 'dashed',
                        color: 'rgba(255, 255, 255, 0.5)'
                      }
                    }
                  }
                ]
              }
            ]
          }
        },
        echartData4: {
          id: 'main4',
          option: {
            title: {
              text: '5%',
              x: 'center',
              y: 'center',
              textStyle: {
                fontWeight: 'normal',
                color: '#0580f2',
                fontSize: '40'
              }
            },
            color: ['rgba(176, 212, 251, 1)'],
            tooltip: {
              show: false,
              formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
            legend: {
              show: false,
              itemGap: 12,
              data: ['01', '02']
            },
            toolbox: {
              show: false,
              feature: {
                mark: {
                  show: true
                },
                dataView: {
                  show: true,
                  readOnly: false
                },
                restore: {
                  show: true
                }
              }
            },
            series: [{
              name: 'Line 1',
              type: 'pie',
              clockWise: true,
              radius: ['75%', '60%'],
              itemStyle: {
                normal: {
                  label: {
                    show: false
                  },
                  labelLine: {
                    show: false
                  }
                }
              },
              hoverAnimation: false,

              data: [{
                value: 80,
                name: '01',
                itemStyle: {
                  normal: {
                    color: {  // 完成的圆环的颜色
                      colorStops: [{
                        offset: 0, color: '#00cefc' // 0% 处的颜色
                      }, {
                        offset: 1, color: '#367bec' // 100% 处的颜色
                      }]
                    },
                    label: {
                      show: false
                    },
                    labelLine: {
                      show: false
                    }
                  },
                  emphasis: {
                    color: '#00cefc' // 鼠标悬浮上去完成的圆环的颜色
                  }
                }
              }, {
                value: 4,
                name: 'invisible'
              }]
            }
            ]
          },
          height: 300
        }
      }
    },
    computed: mapGetters({
      enterpriseSummaryTableData: 'enterpriseSummaryTableData',
      analysisReportTableData: 'analysisReportTableData'
    }),
    mounted() {
      this.init()
      this.getEnterpriseSummaryTableData({page: 1})
      this.getAnalysisReportTableData({page: 1})
    },
    methods: {
      init() {
        Api.CityPlatform.equipmentRunStatus().then((data) => {
          let obj = this
          if (data.data) {
            obj.equipmentRunStatusNum.normalNum = data.data.normalNum
            obj.equipmentRunStatusNum.stopUseNum = data.data.stopUseNum
            obj.equipmentRunStatusNum.notUseNum = data.data.notUseNum
          }
        })
        this.enterpriseTypes = [
          {name: '备案信息完整率', value: 1},
          {name: '上传追溯信息活跃率', value: 2},
          {name: '设备正常率', value: 3},
          {name: '上传信息及时率', value: 4},
          {name: '上传信息完整率', value: 5},
          {name: '上传信息规范率', value: 4},
          {name: '本期追溯码使用率', value: 4},
          {name: '累计追溯码使用率', value: 4}
        ]
      },
      ...mapActions({
        getEnterpriseSummaryTableData: 'getEnterpriseSummaryTableData',
        getAnalysisReportTableData: 'getAnalysisReportTableData'
      }),
      changeEnterpriseSummaryEnterpriseType(enterpriseType) {
        this.enterpriseSummaryParams.enterpriseType = enterpriseType
        this.getEnterpriseSummaryTableData({enterpriseType: enterpriseType.value, page: 1})
      },
      changeAnalysisReportEnterpriseType(enterpriseType) {
        this.analysisReportParams.enterpriseType = enterpriseType
        this.getAnalysisReportTableData({enterpriseType: enterpriseType.value, page: 1})
      }
    }
  }
</script>

<style>
  /*<!--原来样式-->*/
  /*.zscoress .zscore {*/
  /*text-align: center;*/
  /*}*/
  /*.zscoress .zole {*/
  /*padding: 0;*/
  /*padding: 10px;*/
  /*}*/
  /*.zscoress .esmdeal {*/
  /*display: inline-block;*/
  /*width: 100%;*/
  /*height: 80px;*/
  /*font-size: 30px;*/
  /*color: #fff;*/
  /*padding-top: 5px;*/
  /*line-height: 30px;*/
  /*background-color: rgb(86,199,177);*/
  /*border-radius: 5px;*/
  /*margin-top: 10px;*/
  /*white-space: nowrap;*/
  /*text-overflow:ellipsis;*/
  /*text-align: center;*/
  /*font-family: Impact;*/
  /*}*/
  /*.zscoress  .codedeals {*/
  /*!*background-color: #9fdeff;*!*/
  /*display: inline-block;*/
  /*font-size: 16px;*/
  /*margin-bottom: 4px;*/
  /*}*/
  /*【new】*/
  .fixed-nav {
    position: fixed;
    top: 50%;
    right: 10px;
  }

  .fixed-nav > li {
    padding: 10px;
    margin: 3px 0;
  }

  .fixed-nav > li:nth-child(1) {
    background-color: #4c8eb5;
  }

  .fixed-nav > li:nth-child(2) {
    background-color: #64c58b;
  }

  .fixed-nav > li:nth-child(3) {
    background-color: #f37b1d;
  }

  .fixed-nav > li > a {
    display: block;
    width: 28px;
    height: 28px;
  }

  .fixed-nav > li > .jiankong {
    background: url("/static/img/jiankong.png") no-repeat;
  }

  .fixed-nav > li > .kaohe {
    background: url("/static/img/kaohe.png") no-repeat;
  }

  .fixed-nav > li > .wenti {
    background: url("/static/img/wenti.png") no-repeat;
  }

  .fixed-nav > li > .jiankong:hover {
    background: url("/static/img/jiankong-h.png") no-repeat;
  }

  .fixed-nav > li > .kaohe:hover {
    background: url("/static/img/kaohe-h.png") no-repeat;
  }

  .fixed-nav > li > .wenti:hover {
    background: url("/static/img/wenti-h.png") no-repeat;
  }

  .m-t {
    margin-top: 50px;
  }

  .m-b {
    margin-bottom: 50px;
  }

  .p-r {
    padding-right: 50px;
  }

  .anniu {
    padding-top: 30px;
    padding-bottom: 220px;
  }

  .table-title-box {
    margin-left: 10px;
  }

  .runoption > li > h5 {
    display: block;
    width: 200px;
    height: 80px;
    line-height: 80px;
    text-align: center;
    font-size: 24px;
    color: #fff;
    margin: 0 auto;
    border-radius: 4px;
  }

  .runoption > li > .runoption1 {
    background-color: limegreen;
  }

  .runoption > li > .runoption2 {
    background-color: #dc5a3a;
  }

  .runoption > li > .runoption3 {
    background-color: #7197c8;
  }

  .runoption > li > p {
    text-align: center;
    font-size: 16px;
    font-weight: 600;
    line-height: 30px;
  }
</style>
